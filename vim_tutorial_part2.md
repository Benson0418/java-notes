# Vim基礎教學講義 第二部分：移動與編輯

## 8 進階移動指令

### 8.1 基於單字的移動

簡單的 `hjkl` 顯然無法滿足我們的需要

**基本單字移動：**

```
w     代表「word」，跳轉到下一處單字的開頭
b     代表「back」，跳轉到上一處單字的開頭
e     代表「end」，跳轉到下一處單字的結尾
ge    e的反向版本，跳轉到上一處單字的結尾
```

**大寫版本 `WBE`：**對應的單字是連續的非空字元（以空白為分隔）

### 8.2 基於搜尋的移動

#### 8.2.1 行內搜尋

```
f{char}     跳轉到本行下一個 char 字元出現處
t{char}     跳轉到本行下一個 char 字元出現前
;           快速向後重複 ft 查找
,           快速向前重複 ft 查找
F{char}     往前搜尋而非往後
T{char}     往前搜尋到字元前而非往後
```

#### 8.2.2 檔案中搜尋

```
/{pattern}   跳轉到本檔案中下一個 pattern 出現的地方
?{pattern}   跳轉到本檔案中上一個 pattern 出現的地方
*            等價於 /{pattern}，pattern 是目前游標下的單字
n            快速重複向後查找
N            快速重複向前查找
```

**注意：**`pattern` 可以是正規表達式

### 8.3 基於標記的移動

```
m{mark}      把目前位置標記為 mark
`{mark}      跳轉到名為 mark 的標記位置（確切位置）
'{mark}      跳轉到名為 mark 的標記所在行首
```

**標記說明：**
- `mark` 是 `a-z` 的字元
- 常用場景：當需要暫時離開目前游標處，做一些事情後再快速地回來
- 建議習慣用的標記是 `mm`
- **反引號 `** 跳轉到確切位置（行和列）
- **單引號 '** 跳轉到標記所在行首

#### 8.3.1 內建標記

```
``          上次跳轉前的位置
`.          上次修改的位置
`^          上次插入的位置
''          上次跳轉前的位置（行首）
'.          上次修改的位置（行首）
'^          上次插入的位置（行首）
```

### 8.4 其他實用的跳轉

```
^           跳轉到本行的開始（第一個非空白字元）
$           跳轉到本行的結尾
%           跳到匹配的配對符（括號等）處
```

## 9 編輯操作系統

### 9.1 Operator + Motion = Action

**(操作符)(移動) = 一次編輯動作**

這是Vim最重要的操作邏輯，它允許你組合出各種動作。

#### 9.1.1 常見操作符

```
c           代表「change」，修改，刪除內容並進入插入模式
d           代表「delete」，刪除
y           代表「yank」，複製
v           代表「visual」，選中文字，進入視覺模式
```

#### 9.1.2 操作符範例

```
dgg         刪除到第一行
ye          複製到單字結尾
d$          刪除到行尾
dt;         刪除直到分號為止的內容
```

#### 9.1.3 操作符雙擊

大部分操作符連續按兩次（`cc`/`dd`/`yy`）：將其作用在這一行上

```
dd          刪除這一行
yy          複製這一行
cc          修改這一行（刪除並進入插入模式）
```

## 10 重複與復原操作

### 10.1 重複操作：`.` 指令

```
.           重複上一次修改
u           復原上一次修改
<Ctrl-r>    重做上一次修改
```

**使用場景：**
- `.` 指令非常適合用於需要多次重複某一個修改動作的場景
- 省去了重複輸入指令，大大提高效率
- `.` 指令可以直觀地看到每一次的變化，在合適的時候停止

## 11 批次操作

### 11.1 數字 + 動作

**(次數)(動作)：重複 count 次 action 動作**

動作可以是移動動作或是編輯動作

```
4j          向下移動4行
3dw         刪除3個單字
2yy         複製2行
4p          貼上4次
```

**特點：**
- 數字+動作，是一種重要的批次操作方式，指令直觀，語義明確
- 數字+動作則需要預先知道動作的次數

### 11.2 批次操作比較

**`.` 指令 vs 數字+動作：**
- `.` 指令可以直觀地看到每一次的變化，在合適的時候停止
- 數字+動作則需要預先知道動作的次數

## 12 實用技巧

### 12.1 使用相對行號確定移動範圍

當涉及行操作時，使用相對行號能夠更直觀地確定範圍

```
:set relativenumber     開啟相對行號
:set norelativenumber   關閉相對行號
```

## 小結

- 掌握進階的移動與編輯指令
  - **（重要）**掌握 `{操作符}{移動}` 的操作哲學
- 掌握用 `.` 指令重複上一次修改
  - **（重要）**掌握使用 `{次數}{動作}` 進行批次操作